<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop.xsd">
	<bean id="com.liming.workplan.service.ResearchProjectService"
		class="com.liming.workplan.service.impl.ResearchProjectServiceImpl">
		<property name="rowConfiguration">
			<list>
				<map>
					<entry>
						<key><value>type</value></key>
						<value>select</value>
					</entry>
					<entry>
						<key><value>value</value></key>
						<list>
							<value>申请项目</value>
							<value>获得项目</value>
							<value>参与外单位项目项目</value>
							<value>完成项目</value>
						</list>
					</entry>
					<entry>
						<key><value>setter</value></key>
						<value>setType</value>
					</entry>
					<entry>
						<key><value>searchable</value></key>
						<value>true</value>
					</entry>
					<entry>
						<key><value>field</value></key>
						<value>type</value>
					</entry>
				</map>
				<map>
					<entry>
						<key><value>type</value></key>
						<value>select</value>
					</entry>
					<entry>
						<key><value>value</value></key>
						<list>
							<value>纵向科研项目</value>
							<value>横向科研项目</value>
							<value>快速咨询项目</value>
							<value>技术支持项目</value>
							<value>所级科研项目</value>
						</list>
					</entry>
					<entry>
						<key><value>setter</value></key>
						<value>setProjectType</value>
					</entry>
					<entry>
						<key><value>searchable</value></key>
						<value>true</value>
					</entry>
					<entry>
						<key><value>field</value></key>
						<value>projectType</value>
					</entry>
				</map>
				<map>
					<entry>
						<key><value>type</value></key>
						<value>text</value>
					</entry>
					<entry>
						<key><value>setter</value></key>
						<value>setProjectName</value>
					</entry>
					<entry>
						<key><value>searchable</value></key>
						<value>true</value>
					</entry>
					<entry>
						<key><value>field</value></key>
						<value>projectName</value>
					</entry>
				</map>
				<map>
					<entry>
						<key><value>type</value></key>
						<value>text</value>
					</entry>
					<entry>
						<key><value>setter</value></key>
						<value>setSupportUnit</value>
					</entry>
					<entry>
						<key><value>searchable</value></key>
						<value>true</value>
					</entry>
					<entry>
						<key><value>field</value></key>
						<value>supportUnit</value>
					</entry>
				</map>
				<map>
					<entry>
						<key><value>type</value></key>
						<value>select</value>
					</entry>
					<entry>
						<key><value>value</value></key>
						<list>
							<value>国际级</value>
							<value>国家级</value>
							<value>省部级</value>
							<value>厅局级</value>
							<value>其他</value>
						</list>
					</entry>
					<entry>
						<key><value>setter</value></key>
						<value>setProjectLevel</value>
					</entry>
					<entry>
						<key><value>searchable</value></key>
						<value>true</value>
					</entry>
					<entry>
						<key><value>field</value></key>
						<value>projectLevel</value>
					</entry>
				</map>
				<map>
					<entry>
						<key><value>type</value></key>
						<value>text</value>
					</entry>
					<entry>
						<key><value>setter</value></key>
						<value>setCharger</value>
					</entry>
					<entry>
						<key><value>searchable</value></key>
						<value>true</value>
					</entry>
					<entry>
						<key><value>field</value></key>
						<value>charger</value>
					</entry>
				</map>
				<map>
					<entry>
						<key><value>type</value></key>
						<value>text</value>
					</entry>
					<entry>
						<key><value>setter</value></key>
						<value>setAssistant</value>
					</entry>
					<entry>
						<key><value>searchable</value></key>
						<value>true</value>
					</entry>
					<entry>
						<key><value>field</value></key>
						<value>assistant</value>
					</entry>
				</map>
				<map>
					<entry>
						<key><value>type</value></key>
						<value>double</value>
					</entry>
					<entry>
						<key><value>setter</value></key>
						<value>setProjectFunding</value>
					</entry>
					<entry>
						<key><value>searchable</value></key>
						<value>true</value>
					</entry>
					<entry>
						<key><value>field</value></key>
						<value>projectFunding</value>
					</entry>
				</map>
				<map>
					<entry>
						<key><value>type</value></key>
						<value>select</value>
					</entry>
					<entry>
						<key><value>value</value></key>
						<list>
							<value>医学情报研究部</value>
							<value>卫生政策研究部</value>
							<value>卫生技术评估研究中心</value>
							<value>期刊部</value>
							<value>科研管理部门</value>
						</list>
					</entry>
					<entry>
						<key><value>setter</value></key>
						<value>setDelegatedDepartment</value>
					</entry>
					<entry>
						<key><value>searchable</value></key>
						<value>true</value>
					</entry>
					<entry>
						<key><value>field</value></key>
						<value>delegatedDepartment</value>
					</entry>
				</map>
				<map>
					<entry>
						<key><value>field</value></key>
						<value>typeDesc</value>
					</entry>
					<entry>
						<key><value>type</value></key>
						<value>select</value>
					</entry>
					<entry>
						<key><value>value</value></key>
						<list>
							<value>计划任务书电子版</value>
							<value>计划任务书纸质版</value>
							<value>项目合同书纸质版</value>
						</list>
					</entry>
					<entry>
						<key><value>super.setter</value></key>
						<value>setTypeDesc</value>
					</entry>
				</map>
			</list>
		</property>
		<property name="researchProjectDao"  ref="ResearchProjectDao" />
		<property name="workflowService"  ref="com.liming.workplan.service.WorkflowService" />
		<property name="languageService"  ref="com.liming.workplan.service.LanguageService" />
	</bean>
	
	<bean id="transactionAOP" class="com.liming.workplan.service.aop.TransactionAOP">
 		<property name="sessionFactory" ref="sessionFactory" />
 	</bean>

	<aop:config>
      <aop:aspect ref="transactionAOP">
         <aop:pointcut id="serviceMethod"
                    expression="execution(* com.liming.workplan.service.ResearchProjectService.addResearchProject(..)) 
                    or execution(* com.liming.workplan.service.ResearchProjectService.loadPublishedResearchProject(..))
                    or execution(* com.liming.workplan.service.ResearchProjectService.deleteResearchProjects(..))
                    or execution(* com.liming.workplan.service.WorkflowService.getWorkflowsByRoleAndType(..))
                    or execution(* com.liming.workplan.service.WorkflowService.rejectWorkflow(..)) 
                    or execution(* com.liming.workplan.service.WorkflowService.countWorkflow(..)) 
                    or execution(* com.liming.workplan.service.ResearchProjectService.loadUnPublishedResearchProject(..)) 
                    or execution(* com.liming.workplan.service.ResearchProjectService.getPublishedCount(..)) 
                    or execution(* com.liming.workplan.service.ResearchProjectService.getUnPublishedCount(..)) 
                    or execution(* com.liming.workplan.service.ResearchProjectService.getStatistics(..)) 
                    or execution(* com.liming.workplan.service.ResearchProjectService.exportResult(..)) 
                    or execution(* com.liming.workplan.service.WorkflowService.approveWorkflow(..)) 
                    or execution(* com.liming.workplan.service.ResearchAchievementService.addResearchAchievement(..)) 
                    or execution(* com.liming.workplan.service.ResearchAchievementService.loadPublishedResearchAchievement(..))
                    or execution(* com.liming.workplan.service.ResearchAchievementService.deleteResearchAchievements(..))
                    or execution(* com.liming.workplan.service.ResearchAchievementService.loadUnPublishedResearchAchievement(..)) 
                    or execution(* com.liming.workplan.service.ResearchAchievementService.getPublishedCount(..)) 
                    or execution(* com.liming.workplan.service.ResearchAchievementService.getUnPublishedCount(..))  
                    or execution(* com.liming.workplan.service.ResearchAchievementService.exportResult(..)) " />
         <aop:around pointcut-ref="serviceMethod" method="doInTransaction"/>
      </aop:aspect>
   </aop:config>
</beans>